(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ff8b86b"],{"021b":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r("99af"),r("b0c0");var n=r("5530"),a=(r("96cf"),r("1da1")),o=r("d4ec"),i=r("bee2"),s=r("6ad1"),c=r("f52b"),u=function(){function e(){Object(o["a"])(this,e)}return Object(i["a"])(e,null,[{key:"create",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={name:r,parentId:t},e.next=3,s["a"].post("workspace/member-groups",JSON.stringify(n));case 3:return a=e.sent,e.abrupt("return",a.data.memberGroup);case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,i,u,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].get("workspace/member-groups/".concat(t));case 2:for(r=e.sent,n=r.data.memberGroup.members,a=0;a<n.length;a+=1)o=n[a],i=o.uuid,u=o.name,d=o.businessDefinedId,m=o.confirmed,n[a]=new c["a"](i,u,d,m);return e.abrupt("return",r.data.memberGroup);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(n["a"])({},r),e.next=3,s["a"].put("workspace/member-groups/".concat(t),a);case 3:return o=e.sent,e.abrupt("return",o.data.memberGroup);case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"deleteMemberInMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].delete("workspace/member-groups/".concat(t,"/members/").concat(r));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateMemberInMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object(n["a"])({},a),e.next=3,s["a"].put("workspace/member-groups/".concat(t,"/members/").concat(r),o);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()}]),e}()},"0811":function(e,t,r){},"09da":function(e,t,r){"use strict";var n=r("a271"),a=r.n(n);a.a},"10c2":function(e,t,r){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"18ad":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));r("d3b7"),r("25f0");var n,a=r("88c3");(function(e){e["Folder"]="WorkspaceFolder",e["QuizGroup"]="WorkspaceQuizGroup",e["MemberGroup"]="WorkspaceMemberGroup",e["QuizEvent"]="WorkspaceQuizEvent",e["SoftLink"]="WorkspaceSoftLink"})(n||(n={}));var o=function(e){switch(e){case n.Folder:return a["a"].t("資料夾").toString();case n.QuizGroup:return a["a"].t("題組").toString();case n.MemberGroup:return a["a"].t("班級").toString();case n.QuizEvent:return a["a"].t("測驗").toString();default:return a["a"].t("其他文件").toString()}}},2268:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"memberGroup-maker"},[r("div",{staticClass:"container"},[r("div",{staticClass:"info"},[r("div",{staticClass:"memberGroup-name"},[r("label",{attrs:{for:"class_name"}},[e._v(e._s(e.$t("班級名稱"))+"："+e._s(e.memberGroupName))]),r("button",{staticClass:"btn edit-btn",on:{click:function(t){return t.preventDefault(),e.handleUpdateName(t)}}},[e._v(" "+e._s(e.$t("修改名稱"))+" ")])]),r("div",{staticClass:"length"},[r("label",{attrs:{for:"class_length"}},[e._v(e._s(e.$t("學生人數"))+"：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.members.length,expression:"members.length"}],attrs:{id:"class_length",type:"text",disabled:""},domProps:{value:e.members.length},on:{input:function(t){t.target.composing||e.$set(e.members,"length",t.target.value)}}})])]),r("table",{staticClass:"table table-sm"},[r("tr",[r("th",{attrs:{width:"100"}},[e._v(" "+e._s(e.$t("序號"))+" ")]),r("th",{attrs:{width:"100"}},[e._v(" "+e._s(e.$t("學生姓名"))+" ")]),r("th",{attrs:{width:"100"}},[e._v(" "+e._s(e.$t("代號"))+" ")]),r("th",{attrs:{width:"50"}},[e._v(" "+e._s(e.$t("確認身分"))+" ")]),r("th",{attrs:{width:"50"}},[e._v(" "+e._s(e.$t("刪除"))+" ")])]),e._l(e.members,(function(t,n){return r("tr",{key:n,staticClass:"data",attrs:{"table-hover":""}},[r("td",[e._v(" "+e._s(n+1)+" ")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"member.name"}],class:{"bg-gray":!0===t.openEdit},attrs:{type:"text",disabled:!t.openEdit},domProps:{value:t.name},on:{input:function(r){r.target.composing||e.$set(t,"name",r.target.value)}}})]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.businessDefinedId,expression:"member.businessDefinedId"}],class:{"bg-gray":!0===t.openEdit},attrs:{type:"text",disabled:!t.openEdit},domProps:{value:t.businessDefinedId},on:{input:function(r){r.target.composing||e.$set(t,"businessDefinedId",r.target.value)}}})]),r("td",{attrs:{width:"50"}},[!1===t.confirmed?r("button",{staticClass:"btn to-be-confirmed-td",on:{click:function(t){return e.toggleConfirmed(n)}}},[e._v(" "+e._s(e.$t("待確認"))+" ")]):e._e(),!0===t.confirmed?r("button",{staticClass:"btn confirmed-td",on:{click:function(t){return e.toggleConfirmed(n)}}},[e._v(" "+e._s(e.$t("已確認"))+" ")]):e._e()]),r("td",[r("button",{staticClass:"btn no-bg-btn",on:{click:function(t){return e.openRemoveModal(n)}}},[r("i",{staticClass:"fas fa-trash-alt"})])])])}))],2),r("v-dialog")],1),r("UpdateWorkspaceObjectNameModal")],1)},a=[],o=(r("a434"),r("96cf"),r("1da1")),i=r("2b0e"),s=r("add5"),c=r("021b"),u=r("f52b"),d=r("aa73"),m=i["default"].extend({components:{UpdateWorkspaceObjectNameModal:s["a"]},data:function(){return{members:[]}},computed:{workspaceId:function(){return this.$store.state.currentWorkspace.uuid},memberGroupId:function(){return this.$store.state.currentMemberGroup.uuid},memberGroupName:function(){return this.$store.state.currentMemberGroup.uniqueName}},mounted:function(){d["a"].loginCheck(),this.loadMemberGroup(this.memberGroupId)},methods:{handleUpdateName:function(){this.$modal.show("update-workspace-object-name-modal",{workspaceObject:this.$store.state.currentMemberGroup})},loadMemberGroup:function(e){var t=this;c["a"].getMemberGroup(e).then((function(e){t.members=e.members}))},editStudent:function(e){var t=this.members[e];t.openEdit=!0},saveEdit:function(e){var t=this.members[e];t.openEdit=!1},toggleConfirmed:function(e){var t=this.members[e],r=new u["c"](!t.confirmed);c["a"].updateMemberInMemberGroup(this.memberGroupId,t.uuid,r).then((function(){t.confirmed=!t.confirmed}))},openRemoveModal:function(e){var t=this;this.$modal.show("dialog",{title:this.$t("確定刪除嗎?"),text:this.$t("這個學生資料刪掉就不會再回來了"),buttons:[{title:this.$t("取消"),handler:function(){t.$modal.hide("dialog")}},{title:this.$t("確定"),handler:function(){t.$modal.hide("dialog"),t.$emit("deleteStudent"),t.deleteStudent(e)}}]})},deleteStudent:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log("刪除學生資料"),e>=0&&e<t.members.length&&c["a"].deleteMemberInMemberGroup(t.memberGroupId,t.members[e].uuid).then((function(){t.members.splice(e,1)}));case 2:case"end":return r.stop()}}),r)})))()}}}),p=m,l=(r("5f51"),r("fe74"),r("2877")),b=Object(l["a"])(p,n,a,!1,null,"699af1c6",null);t["default"]=b.exports},"3bb2":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("96cf");var n=r("1da1"),a=r("d4ec"),o=r("bee2"),i=r("6ad1"),s=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"retrieve",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("workspace/folders/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"create",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={name:t,parentId:r},e.next=3,i["a"].post("workspace/folders",n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("workspace/folders/".concat(t),r));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}()},4485:function(e,t,r){},"5f51":function(e,t,r){"use strict";var n=r("0811"),a=r.n(n);a.a},"841c":function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),o=r("1d80"),i=r("129f"),s=r("14c3");n("search",1,(function(e,t,r){return[function(t){var r=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var o=a(e),c=String(this),u=o.lastIndex;i(u,0)||(o.lastIndex=0);var d=s(o,c);return i(o.lastIndex,u)||(o.lastIndex=u),null===d?-1:d.index}]}))},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),o=r("e8b5"),i=r("861d"),s=r("7b0b"),c=r("50c4"),u=r("8418"),d=r("65f0"),m=r("1dde"),p=r("b622"),l=r("2d00"),b=p("isConcatSpreadable"),f=9007199254740991,h="Maximum allowed index exceeded",v=l>=51||!a((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),w=m("concat"),g=function(e){if(!i(e))return!1;var t=e[b];return void 0!==t?!!t:o(e)},k=!v||!w;n({target:"Array",proto:!0,forced:k},{concat:function(e){var t,r,n,a,o,i=s(this),m=d(i,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?i:arguments[t],g(o)){if(a=c(o.length),p+a>f)throw TypeError(h);for(r=0;r<a;r++,p++)r in o&&u(m,p,o[r])}else{if(p>=f)throw TypeError(h);u(m,p++,o)}return m.length=p,m}})},a271:function(e,t,r){},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),o=r("a691"),i=r("50c4"),s=r("7b0b"),c=r("65f0"),u=r("8418"),d=r("1dde"),m=r("ae40"),p=d("splice"),l=m("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,f=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!l},{splice:function(e,t){var r,n,d,m,p,l,w=s(this),g=i(w.length),k=a(e,g),j=arguments.length;if(0===j?r=n=0:1===j?(r=0,n=g-k):(r=j-2,n=f(b(o(t),0),g-k)),g+r-n>h)throw TypeError(v);for(d=c(w,n),m=0;m<n;m++)p=k+m,p in w&&u(d,m,w[p]);if(d.length=n,r<n){for(m=k;m<g-n;m++)p=m+n,l=m+r,p in w?w[l]=w[p]:delete w[l];for(m=g;m>g-n+r;m--)delete w[m-1]}else if(r>n)for(m=g-n;m>k;m--)p=m+n-1,l=m+r-1,p in w?w[l]=w[p]:delete w[l];for(m=0;m<r;m++)w[m+k]=arguments[m+2];return w.length=g-n+r,d}})},add5:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("modal",{attrs:{name:e.modalName,transition:"pop-out",width:e.modalWidth,"focus-trap":!0,height:224},on:{"before-open":e.beforeOpen}},[r("div",{staticClass:"box"},[r("div",{staticClass:"partition"},[r("div",{staticClass:"partition-title"},[e._v(" "+e._s(e.$t("修改objectType名稱",{objectType:e.objectType}))+" ")]),r("div",{staticClass:"partition-form"},[r("form",{attrs:{autocomplete:"false"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.workspaceObjectName,expression:"workspaceObjectName"}],attrs:{id:"name",type:"text",placeholder:e.objectType+"名稱"},domProps:{value:e.workspaceObjectName},on:{input:function(t){t.target.composing||(e.workspaceObjectName=t.target.value)}}})]),r("p",{staticClass:"remind"},[e._v(" "+e._s(e.remind)+" ")]),r("div",{staticClass:"button-set"},[r("button",{attrs:{id:"cencel-btn"},on:{click:e.handleCancel}},[e._v(" "+e._s(e.$t("取消"))+" ")]),r("button",{attrs:{id:"create-btn"},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("送出"))+" ")])])])])])])},a=[],o=(r("b0c0"),r("d3b7"),r("ac1f"),r("25f0"),r("841c"),r("96cf"),r("1da1")),i=r("2b0e"),s=r("021b"),c=r("f52b"),u=r("18ad"),d=r("3bb2"),m=656,p=i["default"].extend({data:function(){return{translate:u["b"],modalName:"update-workspace-object-name-modal",modalWidth:m,remind:"",workspaceObjectName:"",workspaceObject:null}},computed:{objectType:function(){return this.workspaceObject?Object(u["b"])(this.workspaceObject.metadata.type):this.$t("未知").toString()}},created:function(){this.modalWidth=window.innerWidth<m?m/2:m},methods:{beforeOpen:function(e){this.remind="",e.params.workspaceObject&&(this.workspaceObject=e.params.workspaceObject,this.workspaceObjectName=this.workspaceObject.metadata.name)},handleCancel:function(){console.log("取消"),this.$modal.hide(this.modalName)},handleSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.workspaceObject){t.next=2;break}return t.abrupt("return");case 2:t.prev=2,t.t0=e.workspaceObject.metadata.type,t.next=t.t0===u["a"].MemberGroup?6:t.t0===u["a"].Folder?18:22;break;case 6:if(r=/^[^\s_!¡?÷?¿/\\+=@#$%ˆ&*(){}|~<>;:[\]]{2,}$/g,console.log(e.workspaceObjectName.search(r)),0===e.workspaceObjectName.search(r)){t.next=10;break}throw new Error("只允許中文、英文及數字，且至少兩個字。不允許任何空白、特殊符號(~!@#$%^&*()_/)。");case 10:return e.remind="",n=new c["b"](e.workspaceObjectName),t.next=14,s["a"].update(e.workspaceObject.uuid,n);case 14:return a=t.sent,e.workspaceObject.metadata.name=a.metadata.name,e.workspaceObject.uniqueName=a.uniqueName,t.abrupt("break",23);case 18:return o={name:e.workspaceObjectName},t.next=21,d["a"].update(e.workspaceObject.uuid,o);case 21:return t.abrupt("break",23);case 22:throw new Error("unknown object type");case 23:e.$modal.hide(e.modalName),e.$emit("submit"),t.next=31;break;case 27:t.prev=27,t.t1=t["catch"](2),e.remind=t.t1.message,e.$notify({type:"error",text:t.t1.message});case 31:case"end":return t.stop()}}),t,null,[[2,27]])})))()}}}),l=p,b=(r("b7fd"),r("09da"),r("2877")),f=Object(b["a"])(l,n,a,!1,null,null,null);t["a"]=f.exports},b7fd:function(e,t,r){"use strict";var n=r("4485"),a=r.n(n);a.a},f52b:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return i}));r("b0c0");var n=r("d4ec"),a=function e(t,r,a,o){Object(n["a"])(this,e),this.openEdit=!1,this.uuid=t,this.name=r,this.businessDefinedId=a,this.confirmed=o},o=function e(t){Object(n["a"])(this,e),this.confirmed=t},i=function e(t){Object(n["a"])(this,e),this.name=t}},fe74:function(e,t,r){"use strict";var n=r("10c2"),a=r.n(n);a.a}}]);
//# sourceMappingURL=chunk-2ff8b86b.eb75c72f.js.map