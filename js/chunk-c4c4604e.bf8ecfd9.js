(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4c4604e"],{"226e":function(e,t,r){},"5f2b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"workspace-browser"},[r("div",{staticClass:"top mx-4"},[e.currentFolder?r("Breadcrumb",{attrs:{situation:"workspaceBrower",path:e.currentFolder.path},on:{visitFolder:e.visitFolder}}):e._e(),r("div",{staticClass:"action-area p-4"},[e.selectModeOpen&&e.selection.length>0?r("div",{staticClass:"action-btns"},[r("div",{staticClass:"buttons"},[1===e.selection.length?r("b-button",{on:{click:function(t){return t.preventDefault(),e.shareCards(t)}}},[r("i",{staticClass:"fas fa-user-plus"})]):e._e(),1===e.selection.length&&"WorkspaceFolder"!==e.selection[0].metadata.type?r("b-button",{staticClass:"btn-info",on:{click:function(t){return t.preventDefault(),e.enterGroupPreview(t)}}},[r("i",{staticClass:"fas fa-eye"})]):e._e(),1===e.selection.length&&"WorkspaceFolder"!==e.selection[0].metadata.type?r("b-button",{staticClass:"btn-info",on:{click:function(t){return t.preventDefault(),e.enterGroup(t)}}},[r("i",{staticClass:"fas fa-pen"})]):e._e(),1===e.selection.length&&"WorkspaceFolder"===e.selection[0].metadata.type?r("b-button",{staticClass:"btn-info",on:{click:function(t){return t.preventDefault(),e.$modal.show("update-workspace-object-name-modal",{workspaceObject:e.selection[0]})}}},[r("i",{staticClass:"fas fa-pen"})]):e._e(),r("b-button",{on:{click:function(t){return t.preventDefault(),e.removeCards(t)}}},[r("i",{staticClass:"fas fa-trash-alt"})]),r("b-button",{staticClass:"btn-info",on:{click:function(t){return t.preventDefault(),e.moveCards(t)}}},[r("i",{staticClass:"fas fa-arrows-alt"})])],1)]):e._e(),r("div",{staticClass:"select-btn"},[r("button",{staticClass:"btn btn-secondary",on:{click:e.toggleSelectMode}},[e.selectModeOpen?r("span",[e._v(e._s(e.$t("取消")))]):e._e(),e.selectModeOpen?e._e():r("span",[e._v(e._s(e.$t("選取")))])])])])],1),r("div",{staticClass:"p-4"},[e.subfolders.length>0?r("div",{staticClass:"folder-area mb-5"},[r("h1",{staticClass:"m-3"},[e._v(" "+e._s(e.$t("資料夾"))+" ")]),r("FolderList",{attrs:{selection:e.selection,"select-mode-open":e.selectModeOpen},on:{toggle:e.toggleSelection}})],1):e._e(),e.workspaceObjects.length>0?r("div",{staticClass:"workspace-objects"},[r("h1",{staticClass:"ml-3"},[e._v(" "+e._s(e.$t("檔案"))+" ")]),r("transition-group",{staticClass:"transition-tag",attrs:{name:"list-complete",tag:"div"}},e._l(e.workspaceObjects,(function(t){return r("div",{key:t.uuid,staticClass:"list-complete-item col-lg-4 col-xl-3 my-3 ui-card"},[r("div",{staticClass:"selectedItem"},[r("WorkspaceObjectItem",{attrs:{"workspace-object":t,"default-selected":!1,"allow-select-many":!0,"select-mode-open":e.selectModeOpen,selection:e.selection,"display-mode":"workspaceSelectFile"},on:{toggle:function(r){return e.toggleSelection(t)},removeMe:function(r){return e.removeGroupCard(t)},copyMe:function(r){return e.copyGroupCard(t)}}})],1)])})),0)],1):e._e(),0===e.workspaceObjects.length&&0===e.subfolders.length?r("div",[r("EmptyHint")],1):e._e()]),r("MovePositionModal",{attrs:{current:e.currentFolder},on:{submit:e.moveCardsSubmit}}),r("UpdateWorkspaceObjectNameModal",{on:{submit:e.reload}}),r("v-dialog")],1)},a=[],o=(r("4de4"),r("c740"),r("4160"),r("a434"),r("b0c0"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),s=r("2b0e"),i=r("d98b"),c=r("aa73"),u=r("0ccf"),l=r("f410"),d=r("18ad"),p=r("b26e"),m=r("010d"),h=r("8eb5"),f=r("dcc1"),b=r("add5"),v=s["default"].extend({components:{EmptyHint:i["a"],FolderList:u["a"],Breadcrumb:m["a"],WorkspaceObjectItem:h["a"],MovePositionModal:f["a"],UpdateWorkspaceObjectNameModal:b["a"]},data:function(){return{selection:[],selectModeOpen:!1}},computed:{currentFolder:function(){return this.$store.state.currentFolder},subfolders:function(){return this.currentFolder?this.currentFolder.children.filter((function(e){return e.metadata.type===d["a"].Folder})).sort((function(e,t){return e.metadata.name<t.metadata.name?-1:e.metadata.name>t.metadata.name?1:0})):[]},workspaceObjects:function(){return this.currentFolder?this.currentFolder.children.filter((function(e){return e.metadata.type!==d["a"].Folder})).sort((function(e,t){return e.metadata.name<t.metadata.name?-1:e.metadata.name>t.metadata.name?1:0})):[]}},watch:{"$route.params.folderId":{handler:function(e){e&&(p["a"].loadFolder(e),this.selectModeOpen=!1,this.selection=[])},immediate:!0}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c["a"].loginCheck();case 1:case"end":return e.stop()}}),e)})))()},methods:{reload:function(){this.currentFolder&&p["a"].loadFolder(this.currentFolder.uuid),this.selectInit()},selectInit:function(){this.selectModeOpen=!1,this.selection=[]},toggleSelectMode:function(){this.selectModeOpen=!this.selectModeOpen,this.selectModeOpen||(this.selection=[])},toggleSelection:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.selection.findIndex((function(t){return t.uuid===e.uuid})),-1===n?t.selection.push(e):t.selection.splice(n,1);case 2:case"end":return r.stop()}}),r)})))()},moveCards:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$modal.show("move-position-modal",{currentFolder:e.currentFolder});case 1:case"end":return t.stop()}}),t)})))()},moveCardsSubmit:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),n=[],t.selection.forEach((function(r){t.currentFolder&&n.push(l["a"].move(r.uuid,e))})),r.next=5,Promise.all(n);case 5:t.visitFolder(e),t.$modal.hide("move-position-modal"),t.selectInit();case 8:case"end":return r.stop()}}),r)})))()},removeCards:function(){var e=this;this.$modal.show("dialog",{title:this.$t("確定刪除嗎?"),text:this.$t("刪掉就不會再回來囉"),buttons:[{title:this.$t("取消"),handler:function(){e.$modal.hide("dialog")}},{title:this.$t("確定"),handler:function(){e.$modal.hide("dialog"),e.removeManyGroups()}}]})},shareCards:function(){this.$modal.show("manage-share-mapping-modal",{sourceObjectId:this.selection[0].uuid}),this.selectInit()},enterGroupPreview:function(){var e=this.selection[0];"WorkspaceQuizGroup"===e.metadata.type?(this.$store.commit("changeQuizGroup",e),this.$router.push("/manager/quizgroup-preview")):"WorkspaceMemberGroup"===e.metadata.type&&(this.$store.commit("changeMemberGroup",e),this.$router.push("/manager/membergroup-preview"))},enterGroup:function(){var e=this.selection[0];"WorkspaceQuizGroup"===e.metadata.type?(this.$store.commit("changeQuizGroup",e),this.$router.push("/manager/quizgroup-maker")):"WorkspaceMemberGroup"===e.metadata.type&&(this.$store.commit("changeMemberGroup",e),this.$router.push("/manager/membergroup-maker"))},removeManyGroups:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],e.selection.forEach((function(t){r.push(e.removeGroupCard(t))})),t.next=4,Promise.all(r);case 4:e.selectInit();case 5:case"end":return t.stop()}}),t)})))()},removeGroupCard:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l["a"].remove(e.uuid);case 2:t.currentFolder&&p["a"].loadFolder(t.currentFolder.uuid);case 3:case"end":return r.stop()}}),r)})))()},copyGroupCard:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l["a"].copy(e.uuid);case 2:n=r.sent,t.currentFolder&&t.currentFolder.children.push(n);case 4:case"end":return r.stop()}}),r)})))()},visitFolder:function(e){var t=this.$store.state.currentFolder.uuid;e!==t&&this.$router.push({params:{folderId:e}})}}}),g=v,w=(r("8820"),r("8959"),r("2877")),k=Object(w["a"])(g,n,a,!1,null,"226261ee",null);t["default"]=k.exports},8820:function(e,t,r){"use strict";var n=r("bb40"),a=r.n(n);a.a},8959:function(e,t,r){"use strict";var n=r("226e"),a=r.n(n);a.a},bb40:function(e,t,r){}}]);
//# sourceMappingURL=chunk-c4c4604e.bf8ecfd9.js.map