(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06c40f02"],{"0f6c":function(t,e,n){"use strict";var r=n("77b4"),a=n.n(r);a.a},3125:function(t,e,n){"use strict";var r=n("e91b"),a=n.n(r);a.a},"74c7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));n("b0c0");var r,a=n("d4ec");(function(t){t["INIT"]="INIT",t["SCHEDULED"]="SCHEDULED",t["RUNNING"]="RUNNING",t["DONE"]="DONE",t["CANCELED"]="CANCELED",t["TERMINATED"]="TERMINATED",t["ERROR"]="ERROR"})(r||(r={}));var i=function t(e,n,r,i,u,s,c){if(Object(a["a"])(this,t),e&&(this.name=e),n&&(this.startTime=n),r&&(this.endTime=r),i&&(this.scheduledTime=i),u){this.quizGroupIdList=[];for(var o=0;o<u.length;o+=1)this.quizGroupIdList.push(u[o].uuid)}if(s){this.memberGroupIdList=[];for(var v=0;v<s.length;v+=1)this.memberGroupIdList.push(s[v].uuid)}null!==c&&(this.allowRetake=c)}},"74c9":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{on:{click:function(e){return e.preventDefault(),t.$router.go(-1)}}},[n("i",{staticClass:"fas fa-arrow-left mr-1"}),t._v(" "+t._s(t.$t("上一頁"))+" ")])},a=[],i=(n("3125"),n("2877")),u={},s=Object(i["a"])(u,r,a,!1,null,"3e84fbe5",null);e["a"]=s.exports},"77b4":function(t,e,n){},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("d039"),i=n("e8b5"),u=n("861d"),s=n("7b0b"),c=n("50c4"),o=n("8418"),v=n("65f0"),l=n("1dde"),p=n("b622"),d=n("2d00"),f=p("isConcatSpreadable"),_=9007199254740991,m="Maximum allowed index exceeded",h=d>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),E=l("concat"),g=function(t){if(!u(t))return!1;var e=t[f];return void 0!==e?!!e:i(t)},b=!h||!E;r({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,r,a,i,u=s(this),l=v(u,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?u:arguments[e],g(i)){if(a=c(i.length),p+a>_)throw TypeError(m);for(n=0;n<a;n++,p++)n in i&&o(l,p,i[n])}else{if(p>=_)throw TypeError(m);o(l,p++,i)}return l.length=p,l}})},c6d6:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"event-preview"},[t.quizEvent?n("div",{staticClass:"container"},[n("div",{staticClass:"info-preview"},[n("div",{staticClass:"title"},[n("h2",[t._v(" "+t._s(t.$t("測驗總覽"))+" ")])]),n("div",{staticClass:"btn-area"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.toEventMaker(e)}}},[t._v(" "+t._s(t.$t("編輯"))+" ")])]),n("div",{staticClass:"preview-form"},[n("form",[n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("測驗名稱")))]),n("div",[t._v(t._s(t.quizEvent.metadata.name))])]),n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("測驗代碼")))]),n("div",[t._v(t._s(t.quizEvent.shortId))])]),n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("選擇班級")))]),t.memberGroupsLength>0?n("div",{staticClass:"group"},t._l(t.quizEvent.memberGroups,(function(e,r){return n("p",{key:r},[t._v(" "+t._s(e.metadata.name)+" ("+t._s(e.uniqueName)+") ")])})),0):t._e(),0===t.memberGroupsLength?n("div",[t._v(" "+t._s(t.$t("尚未選擇"))+" ")]):t._e()]),n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("選擇題組")))]),t.quizGroupsLength>0?n("div",{staticClass:"group"},t._l(t.quizEvent.quizGroups,(function(e,r){return n("p",{key:r},[t._v(" "+t._s(e.metadata.name)+" ")])})),0):t._e(),0===t.quizGroupsLength?n("div",[t._v(" "+t._s(t.$t("尚未選擇"))+" ")]):t._e()]),n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("有效時間")))]),t.quizEvent.startTime?n("div",[n("p",[t._v(t._s(t.changeFormat(t.quizEvent.startTime))+" "+t._s(t.$t("至"))+" ")]),n("p",[t._v(t._s(t.changeFormat(t.quizEvent.endTime))+" "+t._s(t.$t("止"))+" ")])]):t._e(),t.quizEvent.startTime?t._e():n("div",[n("p",[t._v(t._s(t.$t("尚未安排")))])])]),n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("發送時間")))]),t.quizEvent.scheduledTime?n("div",[t.latestState===t.State.SCHEDULED?n("div",[t._v(" "+t._s(t.changeFormat(t.quizEvent.scheduledTime))+" ")]):t._e(),t.latestState===t.State.CANCELED?n("div",[t._v(" "+t._s(t.$t("尚未安排"))+" ")]):t._e(),t.latestState===t.State.DONE?n("div",[t._v(" "+t._s(t.changeFormat(t.quizEvent.scheduledTime))+" ")]):t._e()]):t._e(),t.quizEvent.scheduledTime?t._e():n("div",[t._v(" "+t._s(t.$t("尚未安排"))+" ")])]),n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("發送狀態")))]),t.quizEvent.stateHistory?n("div",[t.latestState===t.State.SCHEDULED?n("p",{staticStyle:{color:"green"}},[t._v(" "+t._s(t.$t("排程發送中"))+" ")]):t._e(),t.latestState===t.State.CANCELED?n("p",[t._v(" "+t._s(t.$t("尚未安排"))+" ")]):t._e(),t.latestState===t.State.DONE?n("p",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.$t("已發送"))+" ")]):t._e()]):t._e(),t.quizEvent.stateHistory?t._e():n("div",[t._v(" "+t._s(t.$t("尚未安排"))+" ")])]),n("div",{staticClass:"input-group"},[n("label",[t._v(t._s(t.$t("重複測驗機制")))]),t.quizEvent.allowRetake?n("div",[t._v(" "+t._s(t.$t("開啟"))+" ")]):t._e(),t.quizEvent.allowRetake?t._e():n("div",[t._v(" "+t._s(t.$t("關閉"))+" ")])])])]),n("div",{staticClass:"btn-area last-page"},[n("BackButton")],1)])]):t._e()])},a=[],i=(n("99af"),n("96cf"),n("1da1")),u=n("2b0e"),s=n("cb92"),c=n("74c7"),o=n("aa73"),v=n("74c9"),l=u["default"].extend({components:{BackButton:v["a"]},data:function(){return{quizEvent:null,State:c["a"]}},computed:{isLoading:function(){return this.$store.state.isLoading},workspaceId:function(){return this.$store.state.currentWorkspace.uuid},quizEventId:function(){return this.$store.state.currentQuizEvent.uuid},latestState:function(){var t=c["a"].ERROR;if(this.quizEvent&&this.quizEvent.stateHistory){var e=this.quizEvent.stateHistory.length-1;return t=this.quizEvent.stateHistory[e].state,t}return t},memberGroupsLength:function(){return this.quizEvent&&this.quizEvent.memberGroups?this.quizEvent.memberGroups.length:0},quizGroupsLength:function(){return this.quizEvent&&this.quizEvent.quizGroups?this.quizEvent.quizGroups.length:0}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o["a"].loginCheck(),t.$store.commit("updateLoading",!0),e.prev=2,e.next=5,s["a"].getQuizEvent(t.quizEventId);case 5:t.quizEvent=e.sent;case 6:return e.prev=6,t.$store.commit("updateLoading",!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[2,,6,9]])})))()},methods:{toEventMaker:function(){this.$router.push("/manager/quizevent-maker")},changeFormat:function(t){var e=Date.parse(t),n=this.toDateStringFormat(e/1e3);return n},toDateStringFormat:function(t){var e=new Date(1e3*t),n=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),i=e.getHours(),u=e.getMinutes(),s="",c="",o="",v="";s=r<10?"0".concat(r):"".concat(r),c=a<10?"0".concat(a):"".concat(a),o=i<10?"0".concat(i):"".concat(i),v=u<10?"0".concat(u):"".concat(u);var l="".concat(String(n),"-").concat(s,"-").concat(c," ").concat(o,":").concat(v);return l}}}),p=l,d=(n("0f6c"),n("2877")),f=Object(d["a"])(p,r,a,!1,null,"18502a5b",null);e["default"]=f.exports},cb92:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));n("b0c0");var r=n("5530"),a=(n("96cf"),n("1da1")),i=n("d4ec"),u=n("bee2"),s=n("6ad1"),c=n("74c7"),o=n("88c3"),v=function(){function t(){Object(i["a"])(this,t)}return Object(u["a"])(t,null,[{key:"create",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={parentId:e,name:o["a"].t("未命名測驗")},t.next=3,s["a"].post("workspace/quiz-events/",n);case 3:return r=t.sent,t.abrupt("return",r.data.quizEvent);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getQuizEvent",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].get("workspace/quiz-events/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.quizEvent);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getQuizEventState",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].get("workspace/quiz-events/".concat(e,"/state"));case 2:return n=t.sent,t.abrupt("return",n.data.quizEventState);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var a,i,u,o,v,l,p,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n.metadata,i=n.startTime,u=n.endTime,o=n.scheduledTime,v=n.quizGroups,l=n.memberGroups,p=n.allowRetake,d=new c["b"](a.name,i,u,o,v,l,p),f=Object(r["a"])({},d),t.next=5,s["a"].put("workspace/quiz-events/".concat(e),f);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"sendNow",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].post("workspace/quiz-events/".concat(e,"/send"),{});case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()},e91b:function(t,e,n){}}]);
//# sourceMappingURL=chunk-06c40f02.f4ef0725.js.map